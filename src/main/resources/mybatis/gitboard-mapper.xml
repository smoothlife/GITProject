<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="Board">
	<!-- 글쓴이 아이디 가져오기 -->
	<select id="getWriterId" resultType="String">
		select writerid from gitboard where seq=#{seq}
	</select>
	<!-- Seq값으로 글 내용 가져오기 -->
	<select id="selectContents" resultType="kh.eclass.dto.BoardDTO">
		select * from gitboard where seq=#{seq}
	</select>
	
	<!-- // 작성자 일때만 수정/삭제 보이기  -테스트-->
	<select id="isWriterContents" resultType="Integer">
		select count(*) from gitboard where writerid=#{writerId}
	</select> 
	
	<!-- // 작성자 일때만 수정/삭제 보이기 -->
	<!-- <select id="isWriterContents" resultType="Integer">
		select count(*) from gitboard where seq=#{seq} and writerid=#{writerId}
	</select> -->
	
	<!-- 수정된 게시글 업로드 -->
	<update id="updateContents">
		update gitboard set title=#{title}, contents=#{contents} where seq=#{seq}
	</update>
	<!-- 게시글 삭제 -->
	<delete id="delContents">
		delete from gitboard where seq=#{seq}
	</delete>
	
	<!-- 게시글 작성 -->
	<select id="selectSeq" resultType="Integer">
		SELECT GITBOARD_SEQ.NEXTVAL FROM USER_SEQUENCES WHERE SEQUENCE_NAME='GITBOARD_SEQ';
	</select>
	
	<insert id="insertBoard">
		INSERT INTO BOARD VALUES(#{dto.seq}, #{dto.title}, #{dto.contents}, #{dto.writer_id}, sysdate)
	</insert>
  </mapper>